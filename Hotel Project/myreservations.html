<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Ubuntu" rel="stylesheet">

    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">

    <!-- Font Awesome -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>

    <!-- Bootstrap Scripts -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Resrevations</title>
</head>

<body>
    <section class="colored-section" id="title">

        <div class="container-fluid">

            <!-- Nav Bar -->

            <nav class="navbar navbar-expand-lg navbar-dark">

                <a class="navbar-brand" href="index.html">Hotel Paradise</a>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarTogglerDemo02">

                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html #pricing">Book a Room</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="index.html #cta">Download App</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html #footer">Contact Us</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="index.html #testimonials">Reviews</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="myreservations.html">My Bookings</a>
                        </li>

                    </ul>

                </div>
            </nav>


            <!-- Title -->

            <div class="row">
                <div class="col-lg-6">
                    <h1 class="big-heading">Your Reservations</h1>
                </div>
            </div>

    </section>


    <!-- Features -->

    <section class="white-section" id="features">

        <div class="container-fluid">

            <div class="row" id="ticket-row">
                
            </div>


        </div>
    </section>
    <!-- App Download section -->

    <section class="colored-section" id="cta">

        <div class="container-fluid">

            <h3 class="big-heading" style="font-weight: 100;">Download our App to stay connected!</h>
            </h3>
            <button class="download-button btn btn-lg btn-dark" type="button"><i class="fab fa-apple"></i> <a
                    style="  text-decoration: none; color:white;" target="_blank"
                    href="https://www.apple.com/in/app-store/">App Store</a></button>
            <button class="download-button btn btn-lg btn-dark" type="button"><i class="fab fa-google-play"></i> <a
                    style="  text-decoration: none; color:white;" target="_blank" href="https://play.google.com/store">
                    Play Store</a></button>
        </div>
    </section>
    </section>
    <!-- Footer -->

    <footer class="white-section" id="footer">
        <div class="container-fluid">
            <h2 style="font-family:Arial;">Contact Us</h2><br><br>
            <form class="" action="mailto:support@hotelparadise.com" method="post" enctype="text/plain">
                <label for="">Name: </label>
                <input type="text" name="YourName: " value="" placeholder="Enter your Name">
                <label for="">Email:</label>
                <input type="email" name="YourEmail: " placeholder="Enter your Email" value=""><br><br>
                <textarea name="name" rows="8" placeholder="Enter your Message" cols="80"></textarea><br>
                <input class="btn btn-dark" type="submit" name="" value="Sumbit Here">

            </form>
            <br><br><br>
            <a style="color:black;" target="_blank" href="https://www.facebook.com/"><i
                    class="social-icon fab fa-facebook-f"></i></a>
            <a style="color:black;" target="_blank" href="https://twitter.com/home"><i
                    class="social-icon fab fa-twitter"></i></a>
            <a style="color:black;" target="_blank" href="https://www.instagram.com/"> <i
                    class="social-icon fab fa-instagram"></i></a>
            <a style="color:black;" target="_blank" href="mailto:samplemail@mail.com"> <i
                    class="social-icon fas fa-envelope"></i></a>
            <p>Â© Copyright 2021 Hotel Pradise</p>
            <p>Made with ðŸ§¡ by Garima</p>
        </div>
    </footer>
    
    <p id="demo"></p>
</body>

<script>
    const xmlhttp = new XMLHttpRequest();

    xmlhttp.onload = function() {
    const myObj = JSON.parse(this.responseText); 
    
    let ticket = ``;   
    if(myObj.length==0){        
        ticket += `<center><h3>No Reservations Yet!! <a href="index.html #pricing">Reserve one now</a></h3></center>`;    
    }    
    
    for (var i = 0; i < myObj.length; i++){
        ticket += `<div class="col-lg-5 ticket">
                    <div class="tick_logo">
                        <i class="icon fas fa-check-circle fa-8x"></i>    
                    </div>
                    <div class="ticket_details">
                        <h3>${myObj[i].name}</h3>                        
                        <p>From: ${myObj[i].checkin}   &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; To: ${myObj[i].checkout}</p>
                        <p>Childrens: ${myObj[i].children}  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Adults: ${myObj[i].adults}</p>                        
                        <p>Type: ${myObj[i].room}</p>
                        <div class="del-upd">
                            <button onClick="updreservation(${myObj[i].id})">Update</button>
                            <button onClick="delreservation(${myObj[i].id})">Cancel</button>
                        </div>
                    </div>                    
                </div>`;        
    }    
    
    
    document.getElementById("ticket-row").innerHTML = ticket;
    }
    xmlhttp.open("GET", "myreservations.php");
    xmlhttp.send();

    const delreservation = (e) => {        
        console.log(e)        

        var url = "delreservation.php";
        var params = "Cancel="+e;
        var http = new XMLHttpRequest();

        http.open("GET", url+"?"+params, true);
        http.onreadystatechange = function()
        {
            if(http.readyState == 4 && http.status == 200) {
                //console.log(http.responseText);
                window.location.reload()
            }
        }
        http.send(null);
    }

    const updreservation = (e) => {
        window.location='updres.html?id='+e;
    }

</script>

</html>